<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Work Timer</title>
  <style>
    :root { --bg: #000; --fg: #fff; --muted: #9aa0a6; --accent: #67C7ED; }
    html, body { height: 100%; margin: 0; padding: 0; }
    body {
      background: linear-gradient(180deg, #000 0%, #070707 100%);
      color: var(--fg);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Helvetica Neue", Arial;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      box-sizing: border-box;
      overflow: hidden;
    }

    .card {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: transparent;
      padding: 20px;
      box-sizing: border-box;
    }

    .clock {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      width: 100%;
      height: 100%;
      padding: 20px;
      box-sizing: border-box;
      background: rgba(255,255,255,0.03);
      border-radius: 0;
    }

    .time {
      font-size: clamp(48px, 14vw, 120px);
      font-weight: 900;
      line-height: 1;
      color: var(--fg);
      text-shadow: 0 6px 30px rgba(0,0,0,0.8);
      margin: 10px 0;
    }

    .label { font-size: 14px; color: var(--muted); margin-bottom: 10px; }

    .set-area, .controls, .quick {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }

    button, input[type=number] {
      background: #111;
      color: var(--fg);
      border: 1px solid rgba(255,255,255,0.06);
      padding: 10px 14px;
      border-radius: 8px;
      font-weight: 700;
      cursor: pointer;
    }

    button.primary { background: var(--accent); color: #010101; border: none; }
    button.ghost { background: transparent; border: 1px solid rgba(255,255,255,0.06); }

    .meta { color: var(--muted); font-size: 13px; text-align: center; margin-top: 10px; }

    /* Landscape Mobile: Fullscreen, vertical stacking */
    @media (max-width: 900px) and (orientation: landscape) {
      html, body { height: 100vh; overflow: hidden; }
      .card, .clock { height: 100vh; width: 100vw; border-radius: 0; }
      .clock { flex-direction: column; justify-content: space-evenly; }
      .time { font-size: clamp(48px, 18vw, 140px); }
      .set-area, .controls, .quick { flex-direction: column; gap: 14px; }
      button, input[type=number] { font-size: 16px; }
    }

    /* Portrait Mobile */
    @media (max-width: 600px) and (orientation: portrait) {
      html, body { height: 100vh; overflow: hidden; }
      .card, .clock { height: 100vh; width: 100vw; border-radius: 0; }
      .clock { justify-content: space-evenly; }
      .time { font-size: clamp(48px, 20vw, 120px); }
      .set-area, .controls, .quick { flex-direction: column; gap: 12px; }
      button, input[type=number] { font-size: 16px; }
    }
  </style>
</head>
<body>
  <main class="card">
    <div class="clock" aria-live="polite">
      <p class="label">Work timer — set how many hours you worked and start the countdown</p>
      <div id="display" class="time">00:00:00</div>

      <div class="set-area">
        <label style="color:var(--muted);font-weight:700;">Hours:</label>
        <input id="hours" type="number" min="0" max="999" value="1" />
        <label style="color:var(--muted);font-weight:700;">Minutes:</label>
        <input id="minutes" type="number" min="0" max="59" value="0" />
        <button id="setBtn" class="small ghost">Set</button>
      </div>

      <div class="controls">
        <button id="startBtn" class="primary">Start</button>
        <button id="pauseBtn" class="ghost">Pause</button>
        <button id="resetBtn" class="ghost">Reset</button>
        <div class="quick">
          <button id="add15" class="ghost small">+15m</button>
          <button id="add30" class="ghost small">+30m</button>
          <button id="add60" class="ghost small">+1h</button>
        </div>
      </div>

      <div class="meta" id="status">Ready — set a duration and press Start.</div>
    </div>
  </main>

  <script>
    const display = document.getElementById('display');
    const hoursInput = document.getElementById('hours');
    const minutesInput = document.getElementById('minutes');
    const setBtn = document.getElementById('setBtn');
    const startBtn = document.getElementById('startBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const resetBtn = document.getElementById('resetBtn');
    const add15 = document.getElementById('add15');
    const add30 = document.getElementById('add30');
    const add60 = document.getElementById('add60');
    const status = document.getElementById('status');

    let duration = 0, remaining = 0, timer = null, running = false;

    function fmt(s) {
      s = Math.max(0, Math.floor(s));
      const hh = String(Math.floor(s/3600)).padStart(2,'0');
      const mm = String(Math.floor((s%3600)/60)).padStart(2,'0');
      const ss = String(s%60).padStart(2,'0');
      return `${hh}:${mm}:${ss}`;
    }

    function render() {
      display.textContent = fmt(remaining);
      status.textContent = !running && remaining === 0 ? 'Ready — set a duration and press Start.' : running ? 'Running...' : 'Paused.';
    }

    function setDurationFromInputs() {
      const h = parseInt(hoursInput.value) || 0;
      const m = parseInt(minutesInput.value) || 0;
      duration = h*3600 + m*60;
      remaining = duration;
      render();
    }

    setBtn.addEventListener('click', () => {
      setDurationFromInputs();
      running = false;
      clearInterval(timer);
      timer = null;
    });

    startBtn.addEventListener('click', () => {
      if (remaining <= 0) {
        setDurationFromInputs();
        if (remaining <= 0) {
          status.textContent = 'Set a duration greater than 0.';
          return;
        }
      }
      if (running) return;
      running = true;
      status.textContent = 'Running...';
      let last = Date.now();
      timer = setInterval(() => {
        const now = Date.now();
        const dt = Math.round((now - last) / 1000);
        if (dt > 0) {
          remaining -= dt;
          last = now;
        }
        if (remaining <= 0) {
          remaining = 0; render();
          clearInterval(timer); timer = null; running = false;
          status.textContent = 'Done — timer reached zero.';
          flashDone();
        } else render();
      }, 250);
    });

    pauseBtn.addEventListener('click', () => { clearInterval(timer); timer = null; running = false; render(); });
    resetBtn.addEventListener('click', () => { clearInterval(timer); timer = null; running = false; remaining = duration; render(); });
    add15.addEventListener('click', () => { remaining += 900; duration += 900; render(); });
    add30.addEventListener('click', () => { remaining += 1800; duration += 1800; render(); });
    add60.addEventListener('click', () => { remaining += 3600; duration += 3600; render(); });

    function flashDone() {
      const orig = display.style.color;
      let t = 0;
      const id = setInterval(() => {
        display.style.color = t % 2 ? '#000' : '#fff';
        display.style.background = t % 2 ? '#fff' : 'transparent';
        t++;
        if (t > 6) {
          clearInterval(id);
          display.style.color = orig;
          display.style.background = 'transparent';
        }
      }, 180);
      try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = 'sine';
        o.frequency.value = 880;
        g.gain.value = 0.02;
        o.connect(g);
        g.connect(ctx.destination);
        o.start();
        setTimeout(() => { o.stop(); ctx.close(); }, 280);
      } catch(e) {}
    }

    (function init() { setDurationFromInputs(); render(); })();
    window.addEventListener('keydown', e => {
      if (e.code === 'Space') { e.preventDefault(); if (running) pauseBtn.click(); else startBtn.click(); }
      if (e.key === 'r' || e.key === 'R') resetBtn.click();
      if (e.key === '+') add15.click();
    });
  </script>
</body>
</html>